代码管理规范

开发流程

开始
由本次项目开发的负责的小伙伴以 master 分支建立主开发分支，各小伙伴以主开发分支建立本地开发分支
主开发分支命名规范：统一采用 feat*项目名*版本号，不采用驼峰命名法,可参照 commit 规范
git checkout -b 开发分支名 origin/主开发分支名（之前最好 git pull 下）

开发中
每天第一件事就是拉主开发分支的代码，每开发完一个功能可以提交一次代码，在 gitlab 上发起合并请求到主开发分支，并告知项目负责的小伙伴合并代码，注意本地装的依赖一定要 --save 到依赖文件中，下班前提交一次代码，如果功能没完成可以先不提 pr 到主开发分支，但是要提交在自己的远程开发分支上。避免不可抗因素比如电脑损坏造成本地代码丢失。负责的小伙伴需要及时合并 pr。

git add .
git commit -m 'fix: xxx'
git pull --rebase origin 主分支名
pull 下来有冲突的话需要解决冲突后
git add .
git rebase --continue
git push origin 自己的开发分支名

commit 规范: type: v1.2.5 提交记录描述

type
描述

feat
新功能

fix
修复 bug

doc
文档改变

style
代码格式改变

refactor
某个已有功能重构

perf
性能优化

test
增加测试

build
改变了 build 工具 如 npm 换成了 yarn

revert
撤销上一次的 commit

开发联调提测
各小伙伴把代码提 pr 合并到主开发分支上，由负责的小伙伴合并 pr 并打包发布 dev 环境开始联调，联调过程中修复 bug 按照开发流程合并到主开发分支上，dev 环境发版频率不做要求。开发自测用例通过后将所有代码提交到主开发分支上，由负责项目的小伙伴提 pr 到 test 分支，可以指派给自己，前后端协商写好提测邮件（提测邮件是前后端一起，后端写前端就不用写），提测邮件模板，发布后测试环境验证主流程和功能问题。

测试及灰度验收
测试环境的 bug 修复流程和联调中修 bug 的流程一致，改完一版 bug 后让负责项目的小伙伴询问项目负责测试人员是否可以进行发版,再统一时间发版到测试环境，需要在项目群中说明前端发版以及发版解决 bug 的内容，如果不是阻碍主流程测试的 bug,不能频繁发版,避免影响测试小伙伴的进度。测试通过后直接在测试通过的邮件上回复进行灰度验收，发灰度邮件应发给运维小伙伴，由运维小伙伴发版，灰度验收发现的问题修复与测试一致处理。

上线
灰度验收定版收到申请上线邮件后以主开发分支提 pr 到 master 分支，指派给项目负责人。
合并完后在此次项目的 master 分支打上 tag

线上 bug 修复
从 master 分支拉 bug 修复分支，命名 fix\_ +（bug 的描述或编号）
修复完成自测通过写提测邮件，提 pr 到 test 分支，发布测试环境
测试通过后，提 pr 到 pre 分支，在提测邮件上回复申请上灰度邮件
灰度验收通过收到申请上线邮件后提 pr 到 master 分支，都合并完后删除 bug 修复相关开发分支
合并完后在此次项目的 master 分支打上 tag
线上 bug 修复合并，发布上线应统一由高武军（大师兄）发布上线，避免 bug 修复上线频繁影响线上环境。

tag
每一个版本上线和 bug 修复合并代码到 master 需要打一个标签
内容主要分为两个部分

文档地址：
原型地址等
更新明细：
言简意赅对这次功能相关模块的描述

tips
关于开发分支合并冲突问题
找到相关小伙伴沟通怎么合并，不要不告知别人就合并，以免造成代码丢失出现严重 bug，特别是合 master
关于开发分支项目回滚问题
如果开发项目出现需要项目回滚的情况，应该先告知项目总负责人，由项目负责人决定或执行项目回滚操作，不能私自回滚项目，造成 commit 记录和丢失.
